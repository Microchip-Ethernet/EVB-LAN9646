diff -Napur linux-linux4microchip-2024.04-old/drivers/spi/spi.c linux-linux4microchip-2024.04-new/drivers/spi/spi.c
--- linux-linux4microchip-2024.04-old/drivers/spi/spi.c	2024-05-24 05:04:06.000000000 -0700
+++ linux-linux4microchip-2024.04-new/drivers/spi/spi.c	2024-08-28 15:27:00.274795034 -0700
@@ -968,6 +968,12 @@ static void spi_set_cs(struct spi_device
 		enable = !enable;
 
 	if (spi_get_csgpiod(spi, 0)) {
+#ifdef CONFIG_SPI_ATMEL
+		/* Some SPI masters need both GPIO CS & slave_select */
+		if ((spi->controller->flags & SPI_CONTROLLER_GPIO_SS) &&
+		    spi->controller->set_cs)
+			spi->controller->set_cs(spi, !enable);
+#endif
 		if (!(spi->mode & SPI_NO_CS)) {
 			/*
 			 * Historically ACPI has no means of the GPIO polarity and
@@ -985,10 +991,12 @@ static void spi_set_cs(struct spi_device
 				/* Polarity handled by GPIO library */
 				gpiod_set_value_cansleep(spi_get_csgpiod(spi, 0), activate);
 		}
+#ifndef CONFIG_SPI_ATMEL
 		/* Some SPI masters need both GPIO CS & slave_select */
 		if ((spi->controller->flags & SPI_CONTROLLER_GPIO_SS) &&
 		    spi->controller->set_cs)
 			spi->controller->set_cs(spi, !enable);
+#endif
 	} else if (spi->controller->set_cs) {
 		spi->controller->set_cs(spi, !enable);
 	}
